DROP TABLE IF EXISTS users cascade;
DROP TABLE IF EXISTS cards cascade;
DROP TABLE IF EXISTS likes cascade;

CREATE TABLE IF NOT EXISTS users (
	id       BIGINT       NOT NULL GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	name     VARCHAR(32)  NOT NULL,
	about    VARCHAR(256) NOT NULL,
	avatar   VARCHAR(512) NOT NULL,
	email    VARCHAR(64)  NOT NULL UNIQUE,
	password VARCHAR(32)  NOT NULL
);

CREATE TABLE IF NOT EXISTS cards (
	id       BIGINT       NOT NULL GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name     VARCHAR(32)  NOT NULL,
	link     VARCHAR(512) NOT NULL,
	created  DATE         NOT NULL,
    owner_id BIGINT       NOT NULL REFERENCES users (id) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE IF NOT EXISTS likes (
    card_id BIGINT NOT NULL REFERENCES cards (id) ON DELETE CASCADE ON UPDATE CASCADE,
    user_id BIGINT NOT NULL REFERENCES users (id) ON DELETE CASCADE ON UPDATE CASCADE
);